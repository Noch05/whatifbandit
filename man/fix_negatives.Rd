% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/mab_assign.R
\name{fix_negatives}
\alias{fix_negatives}
\title{Ensure Non-Zero Probabilities of Assignment}
\usage{
fix_negatives(assignment_probs, conditions, iter = 1)
}
\arguments{
\item{assignment_probs}{Named Numeric Vector; Containing probabilities of treatment assignment}

\item{conditions}{A named character vector containing treatment conditions. The elements
of this vector should be the names of each treatment as seen in your data, so to create it you can simply call
\code{unique(df[[condition_col_name]])}. The names of each element are used to reference the contents but are not inherently important;
choose names that are meaningful and consistent. If \code{control_augment} > 0, then the control condition
of the trial in this vector must have the name "Control".}

\item{iter, }{iteration tracker, stops function if it reaches the limit of 50}
}
\value{
Named Numeric Vector; Containing probabilities of treatment assignment, all positive.
}
\description{
Redistributes Probabilities when control augmentation produces negatives
}
\details{
Redistributes the difference in making a probability positive to preserve the distribution
Calculates the difference required and takes it uniformly from every other treatment arm
but the control arm to then add to the negative probability

Called recursively until no probabilities are negative of the max iterations of 50
is hit, and all negative probabilities are made 0 with no redistribution
}
\keyword{internal}
