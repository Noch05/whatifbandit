% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/mab_assign.R
\name{assign_treatments}
\alias{assign_treatments}
\title{Adaptively Assign Treatments in a Period}
\usage{
assign_treatments(
  current_data,
  probs,
  blocking = NULL,
  algorithm,
  id_col,
  conditions,
  condition_col,
  success_col,
  random_prop
)
}
\arguments{
\item{current_data}{tibble/data.table with only observations from the current sampling period.}

\item{probs}{Named Numeric Vector; Probability of Assignment for each treatment condition.}

\item{blocking}{A logical value; whether or not to use treatment blocking. Treatment blocking is used to ensure an even-enough
distribution of treatment conditions across blocks. For example, blocking by gender would mean the randomized assignment should
split treatments evenly not just throughout the sample (so for 4 arms, 25-25-25-25), but also within each block, so 25\% of men
would receive each treatment and 25\% of women the same.}

\item{algorithm}{A character string specifying the MAB algorithm to use. Options are "Thompson" or "UCB1".}

\item{id_col}{Column in \code{data}; contains unique ID as a key.}

\item{conditions}{A named character vector containing treatment conditions. The elements
of this vector should be the names of each treatment as seen in your data, so to create it you can simply call
\code{unique(df[[condition_col_name]])}. The names of each element are used to reference the contents but are not inherently important;
choose names that are meaningful and consistent. If \code{control_augment} > 0, then the control condition
of the trial in this vector must have the name "Control".}

\item{condition_col}{Column in \code{data}; original treatment condition for each observation.}

\item{success_col}{Column in \code{data}; binary successes from the original experiment.}
}
\value{
Updated tibble/data.table with the new treatment conditions for each observation. If this treatment is different
then from under the original experiment, they are labelled as imputation required.
}
\description{
Assigns new treatments for an assignment wave based on the assignment probabilities provided from
\code{\link[=get_bandit]{get_bandit()}}.
Probabilities are passed to \code{\link[randomizr:block_and_cluster_ra]{randomizr::block_and_cluster_ra()}} or \code{\link[randomizr:cluster_ra]{randomizr::cluster_ra()}} from the
\href{https://cran.r-project.org/web/packages/randomizr/index.html}{randomizr} package for random assignment.
}
\details{
The unique identifier for each row is used as the cluster in the for the
randomizr package functions to ensure that each observation is only
treated once, and is returned in the same order as provided.
}
\seealso{
\itemize{
\item \code{\link[randomizr:block_and_cluster_ra]{randomizr::block_and_cluster_ra()}}
\item \code{\link[randomizr:cluster_ra]{randomizr::cluster_ra()}}
}
}
\keyword{internal}
