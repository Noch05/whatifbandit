% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/mab_simulation.R
\name{mab_simulation}
\alias{mab_simulation}
\title{Simulates Multi-Arm Bandit Trial From Prepared Inputs}
\usage{
mab_simulation(
  data,
  time_unit,
  perfect_assignment,
  algorithm,
  period_length,
  prior_periods,
  whole_experiment,
  conditions,
  blocking,
  block_cols,
  data_cols,
  verbose,
  assignment_method,
  control_augment,
  imputation_information
)
}
\arguments{
\item{data}{A data frame, tibble or data.table that provides the input data for the trial.}

\item{time_unit}{A string specifying the unit of time for assigning periods when 'assignment_method` is 'date'.
Acceptable values are "Day", "Week", or "Month".}

\item{perfect_assignment}{Logical; if TRUE, assumes perfect information for treatment assignment
(i.e., all outcomes are observed regardless of the date).
If FALSE, hides outcomes not yet theoretically observed, based
on the dates treatments would have been assigned for each wave.}

\item{algorithm}{A string specifying the MAB algorithm to use. Options are "Thompson" or "UCB1".}

\item{period_length}{Numeric; length of each treatment period.
If assignment method is "Date", this refers to the
length of periods by your specified \code{time_unit} (i.e., if "Day", 10 would be 10 days).
If assignment methods is "Batch", this refers to the number of people in each batch.}

\item{prior_periods}{Numeric; number of previous periods to use in the treatment assignment model
or specify string "All" to use all previous periods.}

\item{whole_experiment}{Logical; if TRUE, uses all past experimental data for imputing outcomes.
If FALSE, uses only data available up to the current period.}

\item{conditions}{Named Character vector containing treatment conditions.
Control condition, must be named "Control" when 'control_augment' > 0.}

\item{blocking}{Logical; Whether or not to use treatment blocking.}

\item{block_cols}{Character Vector of variables to block by.}

\item{data_cols}{Named Character vector containing the names of columns in data as strings:
\itemize{
\item \code{id_col}: Column in data, contains unique id as a key.
\item \code{success_col}: Column in data; Binary successes from original experiment.
\item \code{condition_col}: Column in data; Original Treatment condition for each observation.
\item \code{date_col}: Column in data, contains original date of event/trial; only necessary when assigning by 'Date'.
\item \code{month_col}: Column in data, contains month of treatment; only necessary when time_unit = 'Month'.
\item \code{success_date_col}: Column in data, contains original dates each success occurred; only necessary when 'perfect_assignment' = FALSE.
\item \code{assignment_date_col}: Column in data, contains original dates treatments are assigned to observations; only necessary when 'perfect_assignment' = FALSE.
Used to simulate imperfect information on part of researchers conducting an adaptive trial.
}}

\item{verbose}{Logical; Whether or not to print iteration number. FALSE by default.}

\item{assignment_method}{String; "Date", "Batch" or "Individual" to define the assignment into treatment waves.}

\item{control_augment}{Number \eqn{\in} [0,1]; Proportion of each wave guaranteed to get "Control" treatment.
Default is 0.}

\item{imputation_information}{Object created by \code{\link[=imputation_prep]{imputation_prep()}} containing the conditional means and success dates
for each treatment block to impute from.}
}
\value{
\code{mab} class object, which is named list containing:
\itemize{
\item  \code{final_data}: The processed data with treatment assignments and imputed outcomes, labelled with "mab_" prefix.
\item \code{bandits}: Either the UCB1 statistics or Thompson Sampling posterior distributions.
\item \code{assignment_probs}: Probability of being assigned each treatment arm at a given period
\item \code{estimates}: AIPW (Augmented Inverse Probability Weighting) treatment effect estimates and variances.
\item \code{settings}: A list of the configuration settings used in the trial.
}
}
\description{
Internal helper to \code{\link[=single_mab_simulation]{single_mab_simulation()}}
and \code{\link[=multiple_mab_simulation]{multiple_mab_simulation()}}. Centralizes necessary functions to conduct a
single Multi-Arm-Bandit Trial with adaptive inference. It assumes all inputs have
been preprocessed by \code{\link[=pre_mab_simulation]{pre_mab_simulation()}}.
}
\seealso{
\itemize{
\item \code{\link[=single_mab_simulation]{single_mab_simulation()}}
\item \code{\link[=multiple_mab_simulation]{multiple_mab_simulation()}}
\item \code{\link[=run_mab_trial]{run_mab_trial()}}
\item \code{\link[=get_adaptive_aipw]{get_adaptive_aipw()}}
\item \code{\link[=pre_mab_simulation]{pre_mab_simulation()}}
}
}
\keyword{internal}
