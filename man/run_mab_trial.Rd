% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/run_mab_trial.R
\name{run_mab_trial}
\alias{run_mab_trial}
\title{Runs Multi-Arm Bandit Trial}
\usage{
run_mab_trial(
  data,
  time_unit,
  period_length = NULL,
  prior_periods,
  algorithm,
  whole_experiment,
  perfect_assignment,
  conditions,
  blocking = FALSE,
  block_cols = NULL,
  date_col,
  month_col = NULL,
  id_col,
  condition_col,
  success_col,
  success_date_col,
  assignment_date_col,
  verbose,
  control_augment
)
}
\arguments{
\item{data}{A data frame that provides the input data for the trial.}

\item{time_unit}{A string specifying the unit of time for assigning periods.
Acceptable values are "Day", "Week", or "Month".}

\item{period_length}{Numeric; length of each treatment period.
If assignment method is "Date", this refers to the
length of periods by your specified \code{time_unit} (i.e., if "Day", 10 would be 10 days).
If assignment methods is "Batch", this refers to the number of people in each batch.}

\item{prior_periods}{Numeric; number of previous periods to use in the treatment assignment model
or specify string "All" to use all previous periods.}

\item{algorithm}{A string specifying the MAB algorithm to use. Options are "Thompson" or "UCB1".}

\item{whole_experiment}{Logical; if TRUE, uses all past experimental data for imputing outcomes.
If FALSE, uses only data available up to the current period.}

\item{perfect_assignment}{Logical; if TRUE, assumes perfect information for treatment assignment
(i.e., all outcomes are observed regardless of the date).
If FALSE, hides outcomes not yet theoretically observed, based on
\code{letter_sent_date} from the \code{tanf} dataset.}

\item{conditions}{Named Character vector containing treatment conditions, Control condition, must be named "Control".}

\item{blocking}{Logical; Whether or not to use treatment blocking.}

\item{block_cols}{Character Vector of variables to block by.}

\item{date_col}{Column in data, contains date of treatment.}

\item{month_col}{Column in data, contains month of treatment.}

\item{id_col}{Column in data, contains unique id as a key.}

\item{condition_col}{Column in data, contains original treatment conditions.}

\item{success_col}{Column in data, contains binary successes.}

\item{success_date_col}{Column in data, contains date each success occurred.}

\item{assignment_date_col}{Column in data, contains date of wave assignment.}

\item{verbose}{Logical; Whether or not to print iteration number. FALSE by default.}

\item{control_augment}{Number \in \link{0,1}; Proportion of each wave guaranteed to get "Control" treatment.
Default is 0}
}
\value{
A named list containing:
\item{final_data}{The processed data with treatment assignments and imputed outcomes labelled with "mab_" prefix.}
\item{bandits}{Either the UCB1 statistics or Thompson Sampling posterior distributions.}
}
\description{
Performs a full Multi-Arm Bandit (MAB) trial using Thompson Sampling or UCB1.
The function provides loop around each step of the process for each treatment wave. The function
performs adaptive treatment assignment based on prior performance, imputes potential outcomes based on
original experimental data from and Randomized Controlled Trial (RCT), and then uses that information to update the
assignment for the next wave until completed. Supports flexible customization in treatment blocking strategy,
the size of each treatment wave, and information availability to simulate both a real experiment, and non-stationary
bandit strategy.
}
\seealso{
\itemize{
\item \code{\link[=single_mab_simulation]{single_mab_simulation()}}
\item \code{\link[=create_cutoff]{create_cutoff()}}
*\code{\link[=create_prior]{create_prior()}}
*\code{\link[=mab_sample]{mab_sample()}}
*\code{\link[=assign_treatments]{assign_treatments()}}
}
}
